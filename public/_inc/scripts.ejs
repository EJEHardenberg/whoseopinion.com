<% 
/* Allow a Script to not include any JS at all*/
if( !noJS ) {
	/* Allow a script that doesn't use jQuery to not have it loaded */
	if( !excludeJQuery ){ %>
		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><% 
	}
	/* Global Javascripts go here, library code etc. 
	 * questionPartialUsed is set to true from any script using the partial question
	*/
	if( public.questionPartialUsed ){ %>
		<script type="text/javascript" src="/js/question.js"></script><% 
	}
} 

/* Include a javascript file if it matches the current source */
var src = current.path.join("/")
var javascriptBase = "/js/"
var filter = new RegExp("(^"+javascriptBase+src+"\.js$)"); 

function findDynamicJavaScript(head, tail) {
  	for (key in head) { 
    	val = head[key]; 
      	if (key == '_contents') { 
	        for (i in val) { 
	          	file = val[i]
	          	if (filter.test(tail + file) ) { 
	            	%>
	            	<script type="text/javascript" src="<%= tail + file %>"></script>
	            	<%
	            }
	        }
      	} else { 
        	findDynamicJavaScript(val, tail + key + "/")
		}
	}
}

findDynamicJavaScript(public, "/") 
%>